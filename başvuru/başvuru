const { Command } = require('discord.js-commando');
const { RichEmbed } = require('discord.js');
const moment = require('moment');

module.exports = class AnonsCommand extends Command {
    constructor(client) {
        super(client, {
            name: 'baÅŸvuru',
            aliases: ['baÅŸvuru-yap'],
            group: 'baÅŸvuru',
            memberName: 'baÅŸvuru',
            description: 'Sunucuda eÄŸer baÅŸvuru kanalÄ± ayarlÄ±ysa, o sunucuda baÅŸvuru yaparsÄ±nÄ±z.',
            examples: ['Merhaba!'],
 			throttling: {
                usages: 3,
                duration: 5
            },
            args: [
                {
                    key: 'yazi',
                    prompt: 'YaÅŸÄ±nÄ±z kaÃ§tÄ±r?',
                    type: 'string',
                },
                {
                    key: 'yazi2',
                    prompt: 'Bize kendin hakkÄ±nda kÄ±saca bilgi verir misin?',
                    type: 'string',
                },
                {
                    key: 'yazi3',
                    prompt: 'Herhangi bir deneyimin veya tecbÃ¼ren var mÄ±? Varsa nedir?',
                    type: 'string',
                },
                {
                    key: 'yazi4',
                    prompt: 'GÃ¼nde aktif olabileceÄŸin saatler?',
                    type: 'string',
                },
                {
                    key: 'yazi5',
                    prompt: 'Peki, neden seni diÄŸerleri yerine iÅŸe almalÄ±yÄ±z?',
                    type: 'string',
                },
            ]
        });    
    }
    
    run(msg, args) {
        const kanal = msg.guild.channels.get(msg.guild.settings.get('baÅŸvuruKanal'));
        if (!kanal) return msg.reply(`:lock: BaÅŸvuru kanalÄ±nÄ± bulamÄ±yorum. Bu yÃ¼zden baÅŸvuru sistemi devre dÄ±ÅŸÄ±dÄ±r. AÃ§mak iÃ§in \`efy!baÅŸvuru-kanalÄ±-ayarla\` komutu ile bir baÅŸvuru kanalÄ± belirleyin.`);
    
          msg.reply(`:ok_hand: BaÅŸvurunuz gÃ¶nderildi, en kÄ±sa zamanda size geri dÃ¶nÃ¼ÅŸ yapÄ±lacaktÄ±r.`);
          const kasa = this.client.provider.get(msg.guild.id[msg.author.id], 'baÅŸvuruKasa', []);
          const beskikasano = Number(kasa);
		      const bkasano = parseInt(beskikasano) + 1;
          const { yazi } = args;
          const { yazi2 } = args;
          const { yazi3 } = args;
          const { yazi4 } = args;
          const { yazi5 } = args;
        const embed = new RichEmbed()
        .setAuthor(`ğŸ“‹ ${msg.author.username} AdlÄ± kullanÄ±cÄ±nÄ±n baÅŸvurusu;`)   
        .setColor(this.client.bilgiler.renk)
        .setDescription(``)
        .setThumbnail(msg.author.avatarURL)
        .addField(`**â€¢ KullanÄ±cÄ±:**`, `${msg.author.username}`)
        .addField(`**â€¢ Tag:**`, `${msg.author.tag}`)
        .addField(`**â€¢ KullanÄ±cÄ± ID:**`,`${msg.author.id}`)
        .addField(`**â€¢ Hesap KuruluÅŸu:**`, `${moment.utc(msg.author.createdAt).format('dddd, MMMM Do YYYY, HH:mm:ss')}`)
        .addField(`**â€¢ YaÅŸÄ±n kaÃ§tÄ±r?**`, yazi)
        .addField(`**â€¢ Bize kendin hakkÄ±nda kÄ±saca bilgi verir misin?**`, yazi2)
        .addField(`**â€¢ Herhangi bir deneyimin veya tecbÃ¼ren var mÄ±? Varsa nedir?**`, yazi3)
        .addField(`**â€¢ GÃ¼nde aktif olabileceÄŸin saatler?**`, yazi4)
        .addField(`**â€¢ Peki, neden seni diÄŸerleri yerine iÅŸe almalÄ±yÄ±z?**`, yazi5)
        .setTimestamp()
        return kanal.send(embed);
    
    }
};